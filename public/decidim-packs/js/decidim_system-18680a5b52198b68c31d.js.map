{"version":3,"file":"js/decidim_system-18680a5b52198b68c31d.js","mappings":"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","sources":["webpack://app/webpack/runtime/chunk loaded","webpack://app/../../../.rbenv/versions/2.7.1/lib/ruby/gems/2.7.0/bundler/gems/decidim-47971368df59/decidim-core/app/packs/src/decidim/editor.js","webpack://app/../../../.rbenv/versions/2.7.1/lib/ruby/gems/2.7.0/bundler/gems/decidim-47971368df59/decidim-core/app/packs/src/decidim/configuration.js","webpack://app/../../../.rbenv/versions/2.7.1/lib/ruby/gems/2.7.0/bundler/gems/decidim-47971368df59/decidim-core/app/packs/src/decidim/input_tags.js","webpack://app/../../../.rbenv/versions/2.7.1/lib/ruby/gems/2.7.0/bundler/gems/decidim-47971368df59/decidim-core/app/packs/src/decidim/confirm.js","webpack://app/../../../.rbenv/versions/2.7.1/lib/ruby/gems/2.7.0/bundler/gems/decidim-47971368df59/decidim-system/app/packs/src/decidim/system/application.js","webpack://app/./node_modules/jquery/dist/jquery-exposed.js","webpack://app/webpack/bootstrap","webpack://app/webpack/runtime/compat get default export","webpack://app/webpack/runtime/define property getters","webpack://app/webpack/runtime/global","webpack://app/webpack/runtime/hasOwnProperty shorthand","webpack://app/webpack/runtime/node module decorator","webpack://app/webpack/runtime/jsonp chunk loading","webpack://app/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/* eslint-disable require-jsdoc */\n\nimport lineBreakButtonHandler from \"src/decidim/editor/linebreak_module\"\nimport \"src/decidim/vendor/image-resize.min\"\nimport \"src/decidim/vendor/image-upload.min\"\n\nconst quillFormats = [\"bold\", \"italic\", \"link\", \"underline\", \"header\", \"list\", \"video\", \"image\", \"alt\", \"break\", \"width\", \"style\", \"code\", \"blockquote\", \"indent\"];\n\nexport default function createQuillEditor(container) {\n  const toolbar = $(container).data(\"toolbar\");\n  const disabled = $(container).data(\"disabled\");\n\n  let quillToolbar = [\n    [\"bold\", \"italic\", \"underline\", \"linebreak\"],\n    [{ list: \"ordered\" }, { list: \"bullet\" }],\n    [\"link\", \"clean\"],\n    [\"code\", \"blockquote\"],\n    [{ \"indent\": \"-1\"}, { \"indent\": \"+1\" }]\n  ];\n\n  let addImage = $(container).data(\"editorImages\");\n\n  if (toolbar === \"full\") {\n    quillToolbar = [\n      [{ header: [2, 3, 4, 5, 6, false] }],\n      ...quillToolbar,\n      [\"video\"]\n    ];\n  } else if (toolbar === \"basic\") {\n    quillToolbar = [\n      ...quillToolbar,\n      [\"video\"]\n    ];\n  }\n\n  if (addImage) {\n    quillToolbar.push([\"image\"]);\n  }\n\n  let modules = {\n    linebreak: {},\n    toolbar: {\n      container: quillToolbar,\n      handlers: {\n        \"linebreak\": lineBreakButtonHandler\n      }\n    }\n  };\n  const $input = $(container).siblings('input[type=\"hidden\"]');\n  container.innerHTML = $input.val() || \"\";\n  const token = $('meta[name=\"csrf-token\"]').attr(\"content\");\n  if (addImage) {\n    modules.imageResize = {\n      modules: [\"Resize\", \"DisplaySize\"]\n    }\n    modules.imageUpload = {\n      url: $(container).data(\"uploadImagesPath\"),\n      method: \"POST\",\n      name: \"image\",\n      withCredentials: false,\n      headers: { \"X-CSRF-Token\": token },\n      callbackOK: (serverResponse, next) => {\n        $(\"div.ql-toolbar\").last().removeClass(\"editor-loading\")\n        next(serverResponse.url);\n      },\n      callbackKO: (serverError) => {\n        $(\"div.ql-toolbar\").last().removeClass(\"editor-loading\")\n        console.log(`Image upload error: ${serverError.message}`);\n      },\n      checkBeforeSend: (file, next) => {\n        $(\"div.ql-toolbar\").last().addClass(\"editor-loading\")\n        next(file);\n      }\n    }\n  }\n  const quill = new Quill(container, {\n    modules: modules,\n    formats: quillFormats,\n    theme: \"snow\"\n  });\n\n  if (disabled) {\n    quill.disable();\n  }\n\n  quill.on(\"text-change\", () => {\n    const text = quill.getText();\n\n    // Triggers CustomEvent with the cursor position\n    // It is required in input_mentions.js\n    let event = new CustomEvent(\"quill-position\", {\n      detail: quill.getSelection()\n    });\n    container.dispatchEvent(event);\n\n    if (text === \"\\n\" || text === \"\\n\\n\") {\n      $input.val(\"\");\n    } else {\n      $input.val(quill.root.innerHTML);\n    }\n  });\n  // After editor is ready, linebreak_module deletes two extraneous new lines\n  quill.emitter.emit(\"editor-ready\");\n\n  if (addImage) {\n    const text = $(container).data(\"dragAndDropHelpText\");\n    $(container).after(`<p class=\"help-text\" style=\"margin-top:-1.5rem;\">${text}</p>`);\n  }\n\n  // After editor is ready, linebreak_module deletes two extraneous new lines\n  quill.emitter.emit(\"editor-ready\");\n\n  return quill;\n}\n","export default class Configuration {\n  constructor() {\n    this.config = {};\n  }\n\n  set(key, value = null) {\n    if (typeof key === \"object\") {\n      this.config = { ...this.config, ...key };\n    } else {\n      this.config[key] = value;\n    }\n  }\n\n  get(key) {\n    return this.config[key];\n  }\n}\n","import \"bootstrap-tagsinput\"\n\n$(() => {\n  const $tagContainer = $(\".js-tags-container\");\n\n  // Initialize\n  $tagContainer.tagsinput({\n    tagClass: \"input__tag\",\n    trimValue: true\n  });\n\n});\n","/**\n * A custom confirm dialog for Decidim based on Foundation reveals.\n *\n * Note that this needs to be loaded before the application JS in order for\n * it to gain control over the confirm events BEFORE rails-ujs is loaded.\n */\n\nimport Rails from \"@rails/ujs\"\n\nlet TEMPLATE_HTML = null;\n\nclass ConfirmDialog {\n  constructor(sourceElement) {\n    this.$modal = $(TEMPLATE_HTML);\n    this.$source = sourceElement;\n    this.$content = $(\".confirm-modal-content\", this.$modal);\n    this.$buttonConfirm = $(\"[data-confirm-ok]\", this.$modal);\n    this.$buttonCancel = $(\"[data-confirm-cancel]\", this.$modal);\n\n    // Avoid duplicate IDs and append the new modal to the body\n    const titleId = `confirm-modal-title-${Math.random().toString(36).substring(7)}`;\n\n    this.$modal.removeAttr(\"id\");\n    $(\"#confirm-modal-title\", this.$modal).attr(\"id\", titleId);\n    this.$modal.attr(\"aria-labelledby\", titleId);\n\n    $(\"body\").append(this.$modal);\n    this.$modal.foundation();\n  }\n\n  confirm(message) {\n    this.$content.html(message);\n\n    this.$buttonConfirm.off(\"click\");\n    this.$buttonCancel.off(\"click\");\n\n    return new Promise((resolve) => {\n      this.$buttonConfirm.on(\"click\", (ev) => {\n        ev.preventDefault();\n\n        this.$modal.foundation(\"close\");\n        resolve(true);\n        this.$source.focus();\n      });\n      this.$buttonCancel.on(\"click\", (ev) => {\n        ev.preventDefault();\n\n        this.$modal.foundation(\"close\");\n        resolve(false);\n        this.$source.focus();\n      });\n\n      this.$modal.foundation(\"open\").on(\"closed.zf.reveal\", () => {\n        this.$modal.remove();\n      });\n    });\n  }\n}\n\n// Override the default confirm dialog by Rails\n// See:\n// https://github.com/rails/rails/blob/fba1064153d8e2f4654df7762a7d3664b93e9fc8/actionview/app/assets/javascripts/rails-ujs/features/confirm.coffee\n//\n// There is apparently a better way coming in Rails 6:\n// https://github.com/rails/rails/commit/e9aa7ecdee0aa7bb4dcfa5046881bde2f1fe21cc#diff-e1aaa45200e9adcbcb8baf1c5375b5d1\n//\n// The old approach is broken according to https://github.com/rails/rails/issues/36686#issuecomment-514213323\n// so for the moment this needs to be executed **before** Rails.start()\nconst allowAction = (ev, element) => {\n  const message = $(element).data(\"confirm\");\n  if (!message) {\n    return true;\n  }\n\n  if (!Rails.fire(element, \"confirm\")) {\n    return false;\n  }\n\n  if (TEMPLATE_HTML === null) {\n    TEMPLATE_HTML = $(\"#confirm-modal\")[0].outerHTML;\n    $(\"#confirm-modal\").remove();\n  }\n\n  const dialog = new ConfirmDialog(\n    $(element)\n  );\n  dialog.confirm(message).then((answer) => {\n    const completed = Rails.fire(element, \"confirm:complete\", [answer]);\n    if (answer && completed) {\n      // Allow the event to propagate normally and re-dispatch it without\n      // the confirm data attribute which the Rails internal method is\n      // checking.\n      $(element).data(\"confirm\", null);\n      $(element).removeAttr(\"data-confirm\");\n\n      // The submit button click events won't do anything if they are\n      // dispatched as is. In these cases, just submit the underlying form.\n      if (ev.type === \"click\" &&\n        (\n          $(element).is('button[type=\"submit\"]') ||\n          $(element).is('input[type=\"submit\"]')\n        )\n      ) {\n        $(element).parents(\"form\").submit();\n      } else {\n        let origEv = ev.originalEvent || ev;\n        let newEv = origEv;\n        if (typeof Event === \"function\") {\n          // Clone the event because otherwise some click events may not\n          // work properly when re-dispatched.\n          newEv = new origEv.constructor(origEv.type, origEv);\n        }\n        ev.target.dispatchEvent(newEv);\n      }\n    }\n  });\n\n  return false;\n};\nconst handleConfirm = (ev, element) => {\n  if (!allowAction(ev, element)) {\n    Rails.stopEverything(ev);\n  }\n};\nconst getMatchingEventTarget = (ev, selector) => {\n  let target = ev.target;\n  while (!(!(target instanceof Element) || Rails.matches(target, selector))) {\n    target = target.parentNode;\n  }\n\n  if (target instanceof Element) {\n    return target;\n  }\n\n  return null;\n};\nconst handleDocumentEvent = (ev, matchSelectors) => {\n  return matchSelectors.some((currentSelector) => {\n    let target = getMatchingEventTarget(ev, currentSelector);\n    if (target === null) {\n      return false;\n    }\n\n    handleConfirm(ev, target);\n    return true;\n  });\n};\n\ndocument.addEventListener(\"click\", (ev) => {\n  return handleDocumentEvent(ev, [\n    Rails.linkClickSelector,\n    Rails.buttonClickSelector,\n    Rails.formInputClickSelector\n  ]);\n});\ndocument.addEventListener(\"change\", (ev) => {\n  return handleDocumentEvent(ev, [Rails.inputChangeSelector]);\n});\ndocument.addEventListener(\"submit\", (ev) => {\n  return handleDocumentEvent(ev, [Rails.formSubmitSelector]);\n});\n\n// This is needed for the confirm dialog to work with Foundation Abide.\n// Abide registers its own submit click listeners since Foundation 5.6.x\n// which will be handled before the document listeners above. This would\n// break the custom confirm functionality when used with Foundation Abide.\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  $(Rails.formInputClickSelector).on(\"click.confirm\", (ev) => {\n    handleConfirm(ev, getMatchingEventTarget(ev, Rails.formInputClickSelector));\n  });\n});\n","/* eslint no-unused-vars: 0 */\n/* eslint id-length: [\"error\", { \"exceptions\": [\"$\"] }] */\n\nimport \"core-js/stable\";\nimport \"regenerator-runtime/runtime\";\nimport $ from \"jquery\"\nimport Quill from \"quill\"\nimport Rails from \"@rails/ujs\"\nimport \"foundation-sites\"\n\nimport createQuillEditor from \"src/decidim/editor\"\nimport Configuration from \"src/decidim/configuration\"\n\nwindow.Decidim = window.Decidim || {};\nwindow.Decidim.config = new Configuration()\n\nimport \"src/decidim/input_tags\"\nimport \"src/decidim/confirm\"\n\n$(() => {\n  $(document).foundation();\n\n  $(\".editor-container\").each((_idx, container) => {\n    createQuillEditor(container);\n  });\n\n  $(\"button.collapse\").on(\"click\", () => {\n    $(\".collapsible\").addClass(\"hide\");\n    $(\"button.expand\").removeClass(\"hide\");\n    $(\"button.collapse\").addClass(\"hide\");\n  });\n\n  $(\"button.expand\").on(\"click\", () => {\n    $(\".collapsible\").removeClass(\"hide\");\n    $(\"button.collapse\").removeClass(\"hide\");\n    $(\"button.expand\").addClass(\"hide\");\n  });\n});\n\n// This needs to be loaded after confirm dialog to bind properly\nRails.start()\n","var ___EXPOSE_LOADER_IMPORT___ = require(\"-!./jquery.js\");\nvar ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = require(\"../../expose-loader/dist/runtime/getGlobalThis.js\");\nvar ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;\nif (typeof ___EXPOSE_LOADER_GLOBAL_THIS___[\"$\"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___[\"$\"] = ___EXPOSE_LOADER_IMPORT___;\nif (typeof ___EXPOSE_LOADER_GLOBAL_THIS___[\"jQuery\"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___[\"jQuery\"] = ___EXPOSE_LOADER_IMPORT___;\nmodule.exports = ___EXPOSE_LOADER_IMPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t4609: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkapp\"] = self[\"webpackChunkapp\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [85,1403,9281,8268,1532], function() { return __webpack_require__(41245); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","quillFormats","Configuration","this","config","key","value","_typeof","$","tagsinput","tagClass","trimValue","TEMPLATE_HTML","ConfirmDialog","sourceElement","$modal","$source","$content","$buttonConfirm","$buttonCancel","titleId","Math","random","toString","substring","removeAttr","attr","append","foundation","message","html","off","Promise","resolve","_this","on","ev","preventDefault","focus","remove","handleConfirm","element","data","Rails","outerHTML","confirm","then","answer","completed","type","is","parents","submit","origEv","originalEvent","newEv","Event","constructor","target","dispatchEvent","allowAction","getMatchingEventTarget","selector","Element","parentNode","handleDocumentEvent","matchSelectors","some","currentSelector","document","addEventListener","window","Decidim","each","_idx","container","toolbar","disabled","quillToolbar","list","addImage","header","push","modules","linebreak","handlers","lineBreakButtonHandler","$input","siblings","innerHTML","val","token","imageResize","imageUpload","url","method","name","withCredentials","headers","callbackOK","serverResponse","next","last","removeClass","callbackKO","serverError","console","log","checkBeforeSend","file","addClass","quill","Quill","formats","theme","disable","text","getText","event","CustomEvent","detail","getSelection","root","emitter","emit","after","createQuillEditor","___EXPOSE_LOADER_IMPORT___","___EXPOSE_LOADER_GLOBAL_THIS___","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","id","loaded","__webpack_modules__","call","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","Object","keys","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}